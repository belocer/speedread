'use strict'
new Vue({
  el: '.wrapper',
  data: function () {
    return {
      text: '',
      res: '',
      count: 0,
      mlSec: 300,
      minProgress: 0,
      maxProgress: 100,
      valueProgress: 0,
      qty: 0
    }
  },
  methods: {
    addWord: function (s) {
      var i = this, r = setTimeout(function () {
        if (r && clearTimeout(r), s) {
          if (3 < s.length) {
            var t = s.split('')
            t[2] = '<span style=\'color:red\'>' + t[2] + '</span>', s = (s = t.join()).replace(/,/g, '')
          }
          if (s.length <= 3) {
            var e = s.split('')
            e[0] = '<span style=\'color:red\'>&nbsp;&nbsp;&nbsp;&nbsp;' + e[0] + '</span>', s = (s = e.join()).replace(/,/g, '')
          }
          i.res = s, i.start()
        } else i.count = 0
      }, 61e3 / this.mlSec)
    },
    start: function () {
      var t = this.text.split(' ')
      this.addWord(t[this.count++]), this.valueProgress = Math.floor(100 / t.length * this.count)
    },
    quantity: function () {this.text = this.text.replace(/  /g, ' '), this.text = this.text.replace(/   /g, ' '), this.text = this.text.replace(/    /g, ' '), this.text = this.text.replace(/     /g, ' '), this.text = this.text.replace(['\n'], ' '), this.text = this.text.replace(['\r'], ' '), this.text = this.text.replace(['\n\r'], ' '), this.qty = this.text.split(' ')}
  },
  watch: {text: function () {}}
})